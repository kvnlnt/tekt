var ARK={};ARK.errors=function(module){return module.RequirementError=function(message){this.message=message,this.name="RequirementError"},module.RequirementError.prototype=Object.create(Error.prototype),module}(ARK.errors||{}),ARK.back_to_top=function(module){return module.el="#top",module.delay=150,module.manage=function(){module.$win.scrollTop()>=50?module.$el.fadeIn(200):module.$el.fadeOut(200)},module.scrollTop=function(){module.$body.animate({scrollTop:0},500)},module.init=function(){module.$win=$(window),module.$body=$("body, html"),module.$el=$(module.el),module.$el.on("click",module.scrollTop),module.$win.on("scroll",_.debounce(module.manage,module.delay))},$(document).ready(module.init),module}(ARK.back_to_top||{}),ARK.cookies=function(module){return module.name="ARK",module.json={},module.set=function(key,val,path){key=module.name+"."+key,val=val||"",path=path||"/",$.cookie(key,val,{path:path})},module.default=function(key,val,path){void 0===$.cookie(module.name+"."+key)&&module.set(key,val,path)},module.get=function(key){return key=module.name+"."+key,$.cookie(key)},module}(ARK.cookies||{}),ARK.menus=function(module){return module.el={},module.el.menu="#menu",module.el.toggle="#menu-toggle",module.collapse_key="menu-toggle",module.toggle=function(){module.el.$menu.toggleClass("collapsed");var btn=module.el.$toggle.children(".fa");btn.hasClass("fa-chevron-left")?btn.removeClass("fa-chevron-left").addClass("fa-chevron-right"):btn.removeClass("fa-chevron-right").addClass("fa-chevron-left");var collapsed="true"===ARK.cookies.get(module.collapse_key)?"false":"true";ARK.cookies.set(module.collapse_key,collapsed)},module.init=function(){module.el.$menu=$(module.el.menu),module.el.$toggle=$(module.el.toggle),module.el.$toggle.click(module.toggle),ARK.cookies.default(module.collapse_key,"false")},module.init(),module}(ARK.menus||{}),ARK.Selector=function(config){var defaults={el:null,src:null,callback:null};if(this.settings=_.assign(defaults,config),null===this.el)throw new ARK.errors.RequirementError("el is required");if(null===this.src)throw new ARK.errors.RequirementError("src is required");if(null===this.callback)throw new ARK.errors.RequirementError("callback is required");return this.get=function(key){return this.settings[key]},this.set=function(key,val){return this.settings[key]=val,this.get(key)},this.teardown_iframe=function(){this.iframe.remove(),$("body").css("overflow","auto")},this.callback=function(e){e.preventDefault(),e.stopPropagation();var item=$(e.target),key=item.attr("ark-key"),val=item.attr("ark-val");this.get("callback")({key:key,val:val}),this.teardown_iframe()},this.init_iframe=function(){var close=this.iframe.contents().find(".close_iframe");close.on("click",this.teardown_iframe.bind(this));var item=this.iframe.contents().find(".item");item.on("click",this.callback.bind(this))},this.launch=function(){var iframe=$("<iframe>");iframe.attr("ark-selector-iframe","selector"),iframe.prop("src",this.get("src")),iframe.on("load",this.init_iframe.bind(this)),this.iframe=iframe,$("body").prepend(iframe).css("overflow","hidden")},this.init=function(){this.get("el").on("click",this.launch.bind(this))},this.init(),this},ARK.selectors=function(module){return module.instances=[],module.directive="[ark-selector]",module.pages_handler=function(obj){$("#page_id").val(obj.key),$('[ark-selector="page"]').val(obj.val)},module.type={page:{src:"/pages/search",callback:module.pages_handler}},module.register=function(el){var $el=$(el),type=module.type[$el.attr("ark-selector")],config={};config.el=$el,config.src=type.src,config.callback=type.callback;var selector=new ARK.Selector(config);return module.instances.push(selector),selector},module.init=function(){var selectors=$(module.directive);_.each(selectors,module.register)},$(document).ready(module.init),module}(ARK.selectors||{});
//# sourceMappingURL=scripts.min.js.map