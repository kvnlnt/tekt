"use strict";var TEKT={};TEKT.DIRECTIVE={},TEKT.DIRECTIVE.DIALOG="tekt-dialog",TEKT.DIRECTIVE.FIXATE="tekt-fixate",TEKT.DIRECTIVE.ID="tekt-id",TEKT.DIRECTIVE.MASK="tekt-mask",TEKT.DIRECTIVE.KEY="tekt-key",TEKT.DIRECTIVE.SCROLLER="tekt-scroller",TEKT.DIRECTIVE.SELECTOR="tekt-selector",TEKT.DIRECTIVE.SHOWHIDE="tekt-showhide",TEKT.DIRECTIVE.DISABLE="tekt-disable",TEKT.DIRECTIVE.TARGET="tekt-target",TEKT.DIRECTIVE.TYPE="tekt-type",TEKT.DIRECTIVE.VAL="tekt-val",TEKT.EVENT={},TEKT.EVENT.WIN_RESIZE="WIN:RESIZE",TEKT.EVENT.WIN_SCROLL="WIN:SCROLL",TEKT.pubsub=function(module){return module.e=$({}),module.subscribe=function(){this.e.on.apply(this.e,arguments)},module.unsubscribe=function(){this.e.off.apply(this.e,arguments)},module.publish=function(){this.e.trigger.apply(this.e,arguments)},module}(TEKT.pubsub||{}),TEKT.fx=function(module){return module.sequence=function(els,classes,delay){return _.each(els,function(v,k){$(v).css("opacity",0),$(v).delay(k*delay).queue(function(){$(v).addClass(classes).dequeue()})}),els},module.auto_fx=function(){var collection=[];collection.push(".card"),collection.push("form");var els=$(collection.join(", "));return TEKT.fx.sequence(els,"animated fadeIn",200),els},module.init=function(){module.auto_fx()},$(document).ready(module.init),module}(TEKT.fx||{}),TEKT.cookies=function(module){return module.name="TEKT-",module.json={},module.set=function(key,val,path){key=module.name+key,val=val||"",path=path||"/",$.cookie(key,val,{path:path})},module.default=function(key,val,path){void 0===$.cookie(module.name+key)&&module.set(key,val,path)},module.get=function(key){return key=module.name+key,$.cookie(key)},module}(TEKT.cookies||{}),TEKT.Dialog=function(config){var types={ALERT:"alert",CONFIRM:"confirm"},that=this,defaults={type:types.ALERT,message:null};if(this.settings=_.assign(defaults,config),this.modal=null,this.href="",null===this.message)throw new TEKT.errors.RequirementError("message is required");return this.template='<div class="dialog"></div>',this.$template=$(this.template),this.get=function(key){return this.settings[key]},this.get_alert_message=function(){var template=this.$template,message='<p class="message">'+this.get("message")+"</p>";return template.html(message),template},this.init_confirm_buttons=function(buttons){var that=this,$buttons=$(buttons),yes=$buttons.find(".yes"),no=$buttons.find(".no");return yes.on("click",function(){window.location.href=that.href}),no.on("click",function(){that.modal.hide()}),this},this.get_confirm_message=function(){var template=this.$template,message='<p class="message">'+this.get("message")+"</p>";return message+='<button class="yes">Yes</button>',message+='<button class="no">No</button>',template.html(message),template},this.set=function(key,val){return this.settings[key]=val,this.get(key)},this.alert=function(){var message=this.get_alert_message();return this.modal=new TEKT.Modal({title:"Confirm",content:message}),this.modal.show(),this},this.confirm=function(){var message=this.get_confirm_message();return this.modal=new TEKT.Modal({title:"Confirm",content:message}),this.init_confirm_buttons(message,this.modal),this.modal.show(),this},this.init=function(){var el=this.get("el");switch(this.get("type")){case"alert":el.on("click",function(e){e.preventDefault(),that.alert()});break;case"confirm":el.on("click",function(e){e.preventDefault(),that.href=$(this).attr("href"),that.confirm()})}},this.init(),this},TEKT.dialogs=function(module){return module.directive=TEKT.DIRECTIVE.DIALOG,module.instances=[],module.register=function(el){var $el=$(el),config=TEKT.util.deparam($el.attr(module.directive));config.el=$el;var dialog=new TEKT.Dialog(config);return module.instances.push(dialog),dialog},module.init=function(){var dialogs=$("["+module.directive+"]");return _.each(dialogs,module.register),dialogs},$(document).ready(module.init),module}(TEKT.dialogs||{}),TEKT.Fixate=function(config){var CLASSES={FIXATE:"fixate"},defaults={el:null,threshold:null,expire:!1,fixate_class:CLASSES.FIXATE};if(this.settings=_.assign(defaults,config),null===this.settings.el)throw new TEKT.errors.RequirementError("el is required");return null===this.settings.threshold&&(this.settings.threshold=this.settings.el.height()),this.get=function(key){return this.settings[key]},this.set=function(key,val){return this.settings[key]=val,this.get(key)},this.reset=function(){return this.get("el").removeClass(this.get("fixate_class")),this},this.fixate=function(top){return top<this.get("threshold")?this.reset():(this.get("el").addClass(this.get("fixate_class")),this.get("expire")&&this.get("el").delay(this.get("expire")).queue(this.reset.bind(this))),this},this.init=function(){var that=this;TEKT.pubsub.subscribe(TEKT.EVENT.WIN_SCROLL,function(e,top){that.fixate(top.top)})},this.init(),this},TEKT.fixator=function(module){return module.directive=TEKT.DIRECTIVE.FIXATE,module.instances=[],module.register=function(el){var $el=$(el),config=TEKT.util.deparam($el.attr(module.directive));config.el=$el;var fixate=new TEKT.Fixate(config);return module.instances.push(fixate),fixate},module.init=function(){var fixator=$("["+module.directive+"]");return _.each(fixator,module.register),fixator},$(document).ready(module.init),module}(TEKT.fixator||{}),TEKT.Layout=function(config){var defaults={el:null,regions:null};if(this.settings=_.assign(defaults,config),null===this.settings.el)throw new TEKT.errors.RequirementError("el is required");if(null===this.settings.regions)throw new TEKT.errors.RequirementError("el is required");return this.get=function(key){return this.settings[key]},this.set=function(key,val){return this.settings[key]=val,this.get(key)},this.toggle_collapse=function(region){region.$el.toggleClass("collapsed");var collapsed="true"===TEKT.cookies.get(region.collapse_key)?"false":"true";return TEKT.cookies.set(region.collapse_key,collapsed),region},this.config_region=function(region){var that=this;return region.$el=this.get("el").find(region.selector),region.collapsible&&TEKT.pubsub.subscribe(region.collapse_on,function(){that.toggle_collapse(region)}),region},this.init=function(){this.regions=_.map(this.settings.regions,this.config_region.bind(this))},this.init(),this},TEKT.layouts=function(module){return module.instances=[],module.directive=".template",module.type={main:{regions:{left_column:{name:"left_column",selector:".regions > .left",collapsible:!0,collapse_on:"MENU:TOGGLE",collapse_key:"menu-toggle"},right_column:{name:"right_column",selector:".regions > .right"}}},splash:{regions:{container:{name:"body",selector:".body"}}},focused:{}},module.register=function(el){var $el=$(el),type=module.type[$el.attr(TEKT.DIRECTIVE.TYPE)],regions=void 0===type.regions?[]:type.regions,config={};config.el=$el,config.regions=regions;var layout=new TEKT.Layout(config);return module.instances.push(layout),layout},module.init=function(){var layouts=$(module.directive);return _.each(layouts,module.register),layouts},$(document).ready(module.init),module}(TEKT.layouts||{}),TEKT.Mask=function(config){var defaults={el:null,maskex:null,hint_container:null,last_index:0};if(this.settings=_.assign(defaults,config),null===this.settings.el)throw new TEKT.errors.RequirementError("el is required");if(null===this.settings.maskex)throw new TEKT.errors.RequirementError("maskex is required");if(null===this.settings.hint_container)throw new TEKT.errors.RequirementError("hint_container is required");return this.get=function(key){return this.settings[key]},this.get_mask=function(){return _.map(this.get("maskex"),function(m){return m.mask}).join("")},this.get_hint=function(match){var mask=this.get_mask();return mask.length===match.length?"":'<span class="praise">'+match+"</span>"+mask.substr(match.length,mask.length)},this.set=function(key,val){return this.settings[key]=val,this.get(key)},this.match=function(input,maskex,regex_index,matching_string){var matching_string=matching_string||"",regex_index=regex_index||1,regex_string=_.map(maskex.slice(0,regex_index),function(mask){return mask.regex.source}).join(""),regex=new RegExp(regex_string),regex_test=new RegExp("^"+regex_string).test(input);if(!1===regex_test||regex_index>maskex.length+1)return this.set("last_index",regex_index-1),matching_string;regex_index+=1;var matches=regex.exec(input);return matching_string=matches[0],this.match(input,maskex,regex_index,matching_string)},this.autocomplete=function(keyCode){if(this.get("last_index")>this.get("maskex").length)return this;var input=this.get("el").val(),next_is_autocompleted=void 0!==this.get("maskex")[this.get("last_index")].autocomplete,is_delete_key=8===keyCode||46===keyCode,character_entered=String.fromCharCode(keyCode),next_character=this.get("maskex")[this.get("last_index")].mask,key_is_autocomplete_character=character_entered===next_character;return!0===next_is_autocompleted&&!1===is_delete_key&&!1===key_is_autocomplete_character&&this.get("el").val(input+next_character),this},this.on_input=function(e){var input=this.get("el").val(),match=this.match(input,this.get("maskex")),hint=this.get_hint(match);return this.get("hint_container").html(input.length?hint:""),this.autocomplete(e.keyCode),this},this.init=function(){this.get("el").on("keypress keyup change",this.on_input.bind(this))},this.init(),this},TEKT.masks=function(module){return module.instances=[],module.directive_attr=TEKT.DIRECTIVE.MASK,module.directive="["+module.directive_attr+"]",module.TYPES={datetime:{maskex:[{mask:"MM",regex:/([0-9]{2})/},{mask:"/",regex:/(\/)/,autocomplete:!0},{mask:"DD",regex:/([0-9]{2})/},{mask:"/",regex:/(\/)/,autocomplete:!0},{mask:"YYYY",regex:/([0-9]{4})/},{mask:" ",regex:/(\s)/,autocomplete:!0},{mask:"HH",regex:/([0-9]{2})/},{mask:":",regex:/(:)/,autocomplete:!0},{mask:"MM",regex:/([0-9]{2})/},{mask:"aa",regex:/(am|pm)/}]}},module.register=function(el){var $el=$(el),type=module.TYPES[$el.attr(module.directive_attr)],config={};config.el=$el,config.maskex=type.maskex,config.hint_container=$el.next("label").find(".hint");var mask=new TEKT.Mask(config);return module.instances.push(mask),mask},module.init=function(){var masks=$(module.directive);return _.each(masks,module.register),masks},$(document).ready(module.init),module}(TEKT.masks||{}),TEKT.menus=function(module){return module.el={},module.el.menu=".menu",module.el.toggle=".toggle",module.toggle=function(e){var btn=module.el.$toggle.children(".fa");return TEKT.pubsub.publish("MENU:TOGGLE",module.el),btn.hasClass("fa-chevron-left")?btn.removeClass("fa-chevron-left").addClass("fa-chevron-right"):btn.removeClass("fa-chevron-right").addClass("fa-chevron-left"),e},module.init=function(){module.el.$menu=$(module.el.menu),module.el.$toggle=module.el.$menu.find(module.el.toggle),module.el.$toggle.on("click",module.toggle)},module.init(),module}(TEKT.menus||{}),TEKT.Modal=function(config){var defaults={content:null};if(this.bg=$('<div class="modal-bg"></div>'),this.template='<div class="modal grid">\n                        <header class="grid-row">\n                            <div class="grid-col">\n                                <div class="title grid-col fluid-width"></div>\n                                <div class="actions grid-col">\n                                    <a class="close button link"><i class="fa fa-times"></i></a></div>\n                                </div>\n                        </header>\n                        <div class="grid-row">\n                            <div class="content grid-col fluid-height"></div>\n                        </div>\n                    </div>',this.modal=$(this.template),this.modal_content=this.modal.find(".content"),this.modal_title=this.modal.find(".title"),this.modal_close=this.modal.find("header .close"),this.settings=_.assign(defaults,config),null===this.settings.title)throw new TEKT.errors.RequirementError("Title is required");if(null===this.settings.content)throw new TEKT.errors.RequirementError("Content is required");return this.get=function(key){return this.settings[key]},this.set=function(key,val){return this.settings[key]=val,this},this.set_content=function(content){return this.set("content",content),this.modal_content.html(content),this},this.set_title=function(title){return this.set("title",title),this.modal_title.html(title),this},this.align=function(){var win_height=$(window).height(),win_width=$(window).width(),modal_width=this.modal.width(),modal_height=this.modal.height(),top=(win_height-modal_height)/2,left=(win_width-modal_width)/2;return this.modal.css({top:top,left:left}),this},this.hide=function(){return $("body").toggleClass("modal-body"),this.bg.remove(),this.modal.remove(),this},this.show=function(){return $("body").toggleClass("modal-body"),$("body").prepend(this.bg).prepend(this.modal),this.modal.addClass("animated bounceInRight"),this.align(),this},this.init=function(){this.set_title(this.get("title")).set_content(this.get("content")).align();var that=this;this.modal_close.on("click",this.hide.bind(this)),this.bg.on("click",this.hide.bind(this)),TEKT.pubsub.subscribe(TEKT.EVENT.WIN_RESIZE,function(){that.align()})},this.init(),this},TEKT.Scroller=function(config){var MODES={TOP:"top",TARGET:"target"},defaults={top:null,target:null};if(this.settings=_.assign(defaults,config),this.mode=null===this.settings.target?MODES.TOP:MODES.TARGET,null===this.settings.el)throw new TEKT.errors.RequirementError("el is required");if(null===this.settings.top&&null===this.settings.target)throw new TEKT.errors.RequirementError("either top or a target is required");return this.get=function(key){return this.settings[key]},this.set=function(key,val){return this.settings[key]=val,this.get(key)},this.scroll_to_top=function(){this.scroll_to(0,500,"swing")},this.scroll_to_element=function(el){var top=el.position().top;this.scroll_to(top,500,"swing")},this.scroll_to=function(top,speed,easing){var easing=easing||"linear";TEKT.window.$body.animate({scrollTop:top},speed,easing)},this.init=function(){var that=this;this.get("el").on("click",function(){if(that.mode===MODES.TARGET){var el=$('[tekt-id="'+that.get("target")+'"]');that.scroll_to_element(el)}else{var top=that.get("top");that.scroll_to(top)}})},this.init(),this},TEKT.scrollers=function(module){return module.directive=TEKT.DIRECTIVE.SCROLLER,module.instances=[],module.register=function(el){var $el=$(el),config=TEKT.util.deparam($el.attr(module.directive));config.el=$el;var scroller=new TEKT.Scroller(config);return module.instances.push(scroller),scroller},module.init=function(){var scrollers=$("["+module.directive+"]");return _.each(scrollers,module.register),scrollers},$(document).ready(module.init),module}(TEKT.scrollers||{}),TEKT.Selector=function(config){var defaults={el:null,src:null,callback:null,title:"Search"};if(this.settings=_.assign(defaults,config),this.modal=null,null===this.settings.el)throw new TEKT.errors.RequirementError("el is required");if(null===this.settings.src)throw new TEKT.errors.RequirementError("src is required");if(null===this.settings.callback)throw new TEKT.errors.RequirementError("callback is required");if(null===this.settings.target)throw new TEKT.errors.RequirementError("target is required");return this.get=function(key){return this.settings[key]},this.set=function(key,val){return this.settings[key]=val,this.get(key)},this.callback=function(e){e.preventDefault(),e.stopPropagation();var item=$(e.target),key=item.attr("tekt-key"),val=item.attr("tekt-val");this.get("callback")({key:key,val:val}),this.modal.hide()},this.init_iframe=function(){var that=this,close=this.iframe.contents().find('[tekt-id="close_iframe"]');close.on("click",function(){that.modal.hide()});var item=this.iframe.contents().find(".item");item.on("click",this.callback.bind(this))},this.show=function(){this.iframe=$("<iframe>"),this.iframe.prop("src",this.get("src")),this.iframe.on("load",this.init_iframe.bind(this)),this.modal=new TEKT.Modal({title:this.get("title"),content:this.iframe}),this.modal.show()},this.init=function(){this.get("el").on("click",this.show.bind(this))},this.init(),this},TEKT.selectors=function(module){return module.instances=[],module.directive_attr=TEKT.DIRECTIVE.SELECTOR,module.directive="["+module.directive_attr+"]",module.pages_handler=function(obj){$("#page_id").val(obj.key),$("["+TEKT.DIRECTIVE.SELECTOR+'="page"]').val(obj.val)},module.type={page:{src:"/pages/search",callback:module.pages_handler,title:"Find Page"}},module.register=function(el){var $el=$(el),type=module.type[$el.attr(module.directive_attr)],config={};config.el=$el,config.src=type.src,config.callback=type.callback,config.target=$el,config.title=type.title;var selector=new TEKT.Selector(config);return module.instances.push(selector),selector},module.init=function(){var selectors=$(module.directive);return _.each(selectors,module.register),selectors},$(document).ready(module.init),module}(TEKT.selectors||{}),TEKT.util=function(module){return module.deparam=function(string){var params={};if(string.length){var key_values=string.split("|");_.each(key_values,function(v){var item=v.split("="),key=item[0].trim(),val=item[1].trim();params[key]=val})}return params},module}(TEKT.util||{}),TEKT.ux=function(module){return module.instances=[],module.el={},module.el.showhide_attr=TEKT.DIRECTIVE.SHOWHIDE,module.el.showhide="["+module.el.showhide_attr+"]",module.el.disable_attr=TEKT.DIRECTIVE.DISABLE,module.el.disable="["+module.el.disable_attr+"]",module.showhide=function(e){var target=$(e.target).attr(module.el.showhide_attr),$target=$("[tekt-id="+target+"]");return $target.toggleClass("view-hidden"),this},module.disable=function(e){var target=$(e.target).attr(module.el.disable_attr),$target=$("[tekt-id="+target+"]");$target.toggleClass("disabled");var inputs=$target.find("input");return inputs.each(function(){var is_disabled=$(this).prop("disabled");is_disabled?$(this).prop("disabled",!1):$(this).prop("disabled",!0)}),this},module.init=function(){module.el.$showhide=$(module.el.showhide),module.el.$showhide.on("click",module.showhide.bind(this)),module.instances.push(module.el.$showhide),module.el.$disable=$(module.el.disable),module.el.$disable.on("click",module.disable.bind(this)),module.instances.push(module.el.$disable)},$(document).ready(module.init),module}(TEKT.ux||{}),TEKT.window=function(module){return module.el={},module.delay=150,module.scroll=function(){TEKT.pubsub.publish(TEKT.EVENT.WIN_SCROLL,{top:module.$win.scrollTop()})},module.resize=function(){TEKT.pubsub.publish(TEKT.EVENT.WIN_RESIZE)},module.init=function(){module.$win=$(window),module.$body=$("body, html"),module.$win.on("scroll",_.debounce(module.scroll,module.delay)),module.$win.on("resize",_.debounce(module.resize,module.delay))},$(document).ready(module.init),module}(TEKT.window||{});
//# sourceMappingURL=scripts.min.js.map