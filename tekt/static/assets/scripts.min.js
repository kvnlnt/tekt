var ARK={};ARK.TEKTONIK="http://127.0.0.1:5001",ARK.Autoload=function(module){return module.view=function(selector,view,makeSelectorEl){var makeSelectorEl=makeSelectorEl||!1;$(document).on("ready",function(){var els=$(selector);els.length&&els.each(function(i,container){var config=makeSelectorEl?{el:selector}:{},v=new view(config);v.container=container})})},module}(ARK.Autoloader||{}),ARK.Log=function(){console&&console.log.apply(console,arguments)},ARK.Messenger=function(){console&&console.log.apply(console,arguments)},ARK.Prompt=function(message){var p=prompt(message);return p},ARK.Template=function(view){var source=$(view.template).html(),template=_.template(source),compiled=template(view.model.toJSON());return compiled},ARK.Properties_create=Backbone.View.extend({events:{"click .save":"save"},initialize:function(){this.collection=new ARK.Properties},save:function(e){e.preventDefault();var data=this.$el.find("form").serializeJSON(),model=new ARK.Property(data);console.log(data,model)}}),ARK.Autoload.view(".properties_create",ARK.Properties_create,!0),ARK.Properties_list_item=Backbone.View.extend({tagName:"li",template:"#properties_list_record",events:{"click .delete":"delete"},"delete":function(){var prompt=ARK.Prompt("To delete this property, please type DELETE");"DELETE"==prompt?(this.remove(),this.model.destroy({wait:!0})):ARK.Messenger("Deletion cancelled")},render:function(){var template=ARK.Template(this);return this.$el.html(template),this}}),ARK.Properties_list=Backbone.View.extend({tagName:"ul",className:"list",items:{},initialize:function(){this.collection=new ARK.Properties,this.collection.bind("reset",this.addAll,this),this.collection.bind("add",this.addOne,this),this.collection.fetch({reset:!0})},addOne:function(model){var config={model:model},item=new ARK.Properties_list_item(config);this.items[model.cid]=item},addAll:function(){_.each(this.collection.models,this.addOne,this),this.render()},renderItem:function(item){this.$el.append(item.render().el)},render:function(){_.each(this.items,this.renderItem,this),$(this.container).html(this.el)}}),ARK.Autoload.view(".properties_list",ARK.Properties_list),ARK.Property=Backbone.Model.extend(),ARK.Properties=Backbone.Collection.extend({url:ARK.TEKTONIK+"/properties",model:ARK.Property});
//# sourceMappingURL=scripts.min.js.map