"use strict";var TEKT={};TEKT.pubsub=function(module){return module.e=$({}),module.subscribe=function(){this.e.on.apply(this.e,arguments)},module.unsubscribe=function(){this.e.off.apply(this.e,arguments)},module.publish=function(){this.e.trigger.apply(this.e,arguments)},module}(TEKT.pubsub||{}),TEKT.scrolling=function(module){return module.el='[tekt-piece="scroll_to_top"]',module.delay=150,module.manage=function(){module.$win.scrollTop()>=50?module.$el.fadeIn(200):module.$el.fadeOut(200),TEKT.pubsub.publish("SCROLLING",{top:module.$win.scrollTop()})},module.scrollTop=function(){module.scrollTo(0,500,"swing")},module.scrollTo=function(top,speed,easing){var easing=easing||"linear";module.$body.animate({scrollTop:top},speed,easing)},module.init=function(){module.$win=$(window),module.$body=$("body, html"),module.$el=$(module.el),module.$el.on("click",module.scrollTop),module.$win.on("scroll",_.debounce(module.manage,module.delay))},$(document).ready(module.init),module}(TEKT.scrolling||{}),TEKT.errors=function(module){return module.RequirementError=function(message){this.message=message,this.name="RequirementError"},module.RequirementError.prototype=Object.create(Error.prototype),module.el=".errors",module.instances=[],module.register=function(el){var $el=$(el);return module.instances.push($el),$el},module.highlight=function(){if(module.instances.length){var first_error=module.instances[0],top=first_error.position().top;TEKT.scrolling.scrollTo(top,1e3,"swing")}},module.init=function(){var errors=$(module.el);return _.each(errors,module.register),module.highlight(),errors},$(document).ready(module.init),module}(TEKT.errors||{}),TEKT.fx=function(module){return module.sequence=function(els,classes,delay){return _.each(els,function(v,k){$(v).css("opacity",0),$(v).delay(k*delay).queue(function(){$(v).addClass(classes).dequeue()})}),els},module}(TEKT.fx||{}),TEKT.Card=function(config){var defaults={el:null};if(this.settings=_.assign(defaults,config),this.el=this.settings.el,this.dom={header:".header",showhide:".header .showhide",body:".body",footer:".footer"},null===this.el)throw new TEKT.errors.RequirementError("el is required");return this.get=function(key){return this.settings[key]},this.set=function(key,val){return this.settings[key]=val,this.get(key)},this.toggle=function(){this.get("body").toggleClass("tekt-hidden"),this.get("footer").toggleClass("tekt-hidden"),this.get("showhide").toggleClass("fa-minus"),this.get("showhide").toggleClass("fa-plus")},this.init=function(){var el=this.get("el");this.set("header",el.find(this.dom.header)),this.set("showhide",el.find(this.dom.showhide)),this.set("body",el.find(this.dom.body)),this.set("footer",el.find(this.dom.footer)),this.get("showhide").on("click",this.toggle.bind(this))},this.init(),this},TEKT.cards=function(module){return module.el=".card",module.instances=[],module.register=function(el){var $el=$(el),config={};config.el=$el;var card=new TEKT.Card(config);return module.instances.push(card),card},module.init=function(){var cards=$(module.el);return _.each(cards,module.register),TEKT.fx.sequence(cards,"animated fadeIn",200),cards},module.init(),module}(TEKT.cards||{}),TEKT.cookies=function(module){return module.name="TEKT-",module.json={},module.set=function(key,val,path){key=module.name+key,val=val||"",path=path||"/",$.cookie(key,val,{path:path})},module.default=function(key,val,path){void 0===$.cookie(module.name+key)&&module.set(key,val,path)},module.get=function(key){return key=module.name+key,$.cookie(key)},module}(TEKT.cookies||{}),TEKT.Dialog=function(config){var defaults={el:null};if(this.settings=_.assign(defaults,config),this.el=this.settings.el,this.type=this.settings.type,this.options=this.settings.options,null===this.el)throw new TEKT.errors.RequirementError("el is required");if(null===this.type)throw new TEKT.errors.RequirementError("type is required");return this.get=function(key){return this.settings[key]},this.set=function(key,val){return this.settings[key]=val,this.get(key)},this.delete_prompt=function(){var that=this,callback=function(value){var commit_delete="DELETE"===value;if(commit_delete){var url=that.get("el").attr("href");window.location.href=url}return commit_delete},options={message:this.options.message,placeholder:"Type DELETE to confirm",callback:callback};return vex.dialog.prompt(options)},this.init=function(){vex.defaultOptions.className="vex-theme-wireframe";var el=this.get("el"),that=this;switch(this.type){case"delete-prompt":el.on("click",function(e){e.preventDefault(),that.delete_prompt()})}},this.init(),this},TEKT.dialogs=function(module){return module.directive="tekt-dialog",module.instances=[],module.register=function(el){var $el=$(el),directive=$el.attr(module.directive).split("|"),config={};config.el=$el,config.type=directive[0],config.options=JSON.parse(directive[1]);var dialog=new TEKT.Dialog(config);return module.instances.push(dialog),dialog},module.init=function(){var dialogs=$("["+module.directive+"]");return _.each(dialogs,module.register),dialogs},module.init(),module}(TEKT.dialogs||{}),TEKT.Layout=function(config){var defaults={el:null,regions:null};if(this.settings=_.assign(defaults,config),null===this.el)throw new TEKT.errors.RequirementError("el is required");return this.get=function(key){return this.settings[key]},this.set=function(key,val){return this.settings[key]=val,this.get(key)},this.toggle_collapse=function(region){region.$el.toggleClass("collapsed");var collapsed="true"===TEKT.cookies.get(region.collapse_key)?"false":"true";return TEKT.cookies.set(region.collapse_key,collapsed),region},this.config_region=function(region){var that=this;return region.$el=this.get("el").find(region.selector),region.collapsible&&TEKT.pubsub.subscribe(region.collapse_on,function(){that.toggle_collapse(region)}),region},this.init=function(){this.regions=_.map(this.settings.regions,this.config_region.bind(this))},this.init(),this},TEKT.layouts=function(module){return module.instances=[],module.directive="[tekt-layout]",module.type={main:{regions:{left_column:{name:"left_column",selector:".tr > .td:eq(0)",collapsible:!0,collapse_on:"MENU:TOGGLE",collapse_key:"menu-toggle"},right_column:{name:"right_column",selector:".tr > .td:eq(1)"}}},splash:{regions:{container:{name:"body",selector:".body"}}}},module.register=function(el){var $el=$(el),type=module.type[$el.attr("tekt-layout")],config={};config.el=$el,config.regions=type.regions;var layout=new TEKT.Layout(config);return module.instances.push(layout),layout},module.init=function(){var layouts=$(module.directive);return _.each(layouts,module.register),layouts},$(document).ready(module.init),module}(TEKT.layouts||{}),TEKT.menus=function(module){return module.el={},module.el.menu='[tekt-part="menu"]',module.el.toggle=".toggle",module.toggle=function(e){var btn=module.el.$toggle.children(".fa");return TEKT.pubsub.publish("MENU:TOGGLE",module.el),btn.hasClass("fa-chevron-left")?btn.removeClass("fa-chevron-left").addClass("fa-chevron-right"):btn.removeClass("fa-chevron-right").addClass("fa-chevron-left"),e},module.init=function(){module.el.$menu=$(module.el.menu),module.el.$toggle=module.el.$menu.find(module.el.toggle),module.el.$toggle.on("click",module.toggle)},module.init(),module}(TEKT.menus||{}),TEKT.messenger=function(module){return module.el='[tekt-part="messenger"]',module.instances=[],module.fixate=function(top){var threshold=200,is_sticky=Boolean(module.$el.find("sticky").length);return!0===is_sticky||threshold>top?!1:void module.$el.css({position:"fixed",width:"100%"}).addClass("animated fadeInDown").delay(5e3).queue(function(){module.$el.addClass("animated fadeOutUp").dequeue()})},module.init=function(){module.$el=$(module.el),TEKT.pubsub.subscribe("SCROLLING",function(e,top){module.fixate(top.top)})},module.init(),module}(TEKT.messenger||{}),TEKT.Selector=function(config){var defaults={el:null,src:null,callback:null};if(this.settings=_.assign(defaults,config),null===this.el)throw new TEKT.errors.RequirementError("el is required");if(null===this.src)throw new TEKT.errors.RequirementError("src is required");if(null===this.callback)throw new TEKT.errors.RequirementError("callback is required");return this.get=function(key){return this.settings[key]},this.set=function(key,val){return this.settings[key]=val,this.get(key)},this.teardown_iframe=function(){var that=this;$("body").css("overflow","auto"),this.get("el").trigger("focus"),this.get("el").addClass("animated flash"),this.iframe.addClass("animated bounceOutRight"),this.iframe.one("webkitAnimationEnd mozAnimationEnd MSAnimationEnd oanimationend animationend",function(){that.iframe.remove(),that.get("el").removeClass("animated flash")})},this.callback=function(e){e.preventDefault(),e.stopPropagation();var item=$(e.target),key=item.attr("tekt-key"),val=item.attr("tekt-val");this.get("callback")({key:key,val:val}),this.teardown_iframe(val)},this.init_iframe=function(){var close=this.iframe.contents().find('[tekt-id="close_iframe"]');close.on("click",this.teardown_iframe.bind(this));var item=this.iframe.contents().find(".item");item.on("click",this.callback.bind(this)),this.iframe.show(),this.iframe.addClass("animated bounceInRight")},this.launch=function(){var iframe=$("<iframe>");iframe.attr("tekt-selector-iframe","selector"),iframe.prop("src",this.get("src")),iframe.on("load",this.init_iframe.bind(this)),iframe.hide(),this.iframe=iframe,$("body").prepend(iframe).css("overflow","hidden")},this.init=function(){this.get("el").on("click",this.launch.bind(this))},this.init(),this},TEKT.selectors=function(module){return module.instances=[],module.directive="[tekt-selector]",module.pages_handler=function(obj){$("#page_id").val(obj.key),$('[tekt-selector="page"]').val(obj.val)},module.type={page:{src:"/pages/search",callback:module.pages_handler}},module.register=function(el){var $el=$(el),type=module.type[$el.attr("tekt-selector")],config={};config.el=$el,config.src=type.src,config.callback=type.callback;var selector=new TEKT.Selector(config);return module.instances.push(selector),selector},module.init=function(){var selectors=$(module.directive);return _.each(selectors,module.register),selectors},$(document).ready(module.init),module}(TEKT.selectors||{});
//# sourceMappingURL=scripts.min.js.map