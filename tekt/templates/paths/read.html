{% from "macros/forms.html" import render_field, render_hidden_field %} 
{% extends 'template.html' %} 

{% block body %}

<h1><a href="{{ url_for('.list_paths') }}">Paths</a></h1>

<div tekt-part="card">
<div tekt-pattern="table" class="header">
    <div class="tr">
        <h2 class="title td">{{ path.path }}</h2>
        <div class="actions td">
            <a tekt-pattern="button" href="{{ url_for('.update_path', id=path.id )}}">settings</a>
        </div>
    </div>
</div>
<div class="body">
<table tekt-pattern="table" class="data">
    <tr>
        <th>ID</th>
        <td>{{path.id}}</td>
    </tr>
    <tr>
        <th>path</th>
        <td>{{path.path}}</td>
    </tr>
    <tr>
        <th>property</th>
        <td>{{path.property.property}}</td>
    </tr>
</table>
</div>
</div>


<div tekt-part="card">
    <div tekt-pattern="table" class="header">
        <div class="tr">
            <h2 class="title td">Pages</h2>
        </div>
    </div>
    <form tekt-pattern="form" id="add_page" method="post" action="{{ url_for('paths.read_path', id=path.id) }}">
    <div class="body">
        <table tekt-pattern="table" class="data">
            <tr>
                <th>#</th>
                <th>page</th>
                <th>actions</th>
            </tr>
            {% for page in path.pages %}
            <tr>
                <td>{{ page.id }}</td>
                <td><a href="{{ url_for('pages.read_page', id=page.id) }}">{{ page.page }}</a>
                </td>
                <td><a href="{{ url_for('paths.remove_page_from_path', id=path.id, path_page_id=page.path_page_id)}}">remove</a>
                </td>
            </tr>
            {% endfor %}
        </table>
        <fieldset>
            <ul tekt-pattern="list">
                {{ render_hidden_field(form.path_id) }} {{ render_hidden_field(form.page_id) }} {{ render_field(form.page_selector, placeholder=form.page_selector.description, readonly="readonly", **{'tekt-selector':'page', 'tekt-target':'page_id'}) }}
            </ul>
        </fieldset>
    </div>
    <div tekt-pattern="table" class="footer">
        <div class="tr">
            <div class="actions td">
                <input tekt-pattern="button" type="submit" value="Add Page">
            </div>
        </div>
    </div>
    </form>
</div>

<div style="margin:50px 0px;">
    <a tekt-pattern="button" class="alarm" href="{{ url_for('.delete_path', id=path.id )}}">delete this path</a>
</div>
{% endblock %}
