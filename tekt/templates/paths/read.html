{% from "macros/forms.html" import render_field, render_hidden_field %} 
{% extends 'template.html' %} 

{% block body %}

<h1><a href="{{ url_for('.list_paths') }}">Paths</a></h1>

<div class="card">
<div class="header table">
    <div class="tr">
        <h2 class="title td">Details</h2>
        <div class="actions td">
            <a class="button" href="{{ url_for('.update_path', id=path.id )}}">edit</a>
            <a class="button" href="{{ url_for('.delete_path', id=path.id )}}">delete</a>
        </div>
    </div>
</div>
<table class="data">
    <tr>
        <th>Path</th>
        <td>{{ path.path }}</td>
    </tr>
    <tr>
        <th>Property</th>
        <td>{{ path.property.property }}</td>
    </tr>
</table>
</div>


<div class="card">
<div class="header table">
    <div class="tr">
        <h2 class="title td">Pages</h2>
    </div>
</div>
<table class="data">
    <tr>
        <th>#</th>
        <th>page</th>
        <th>actions</th>
    </tr>
    {% for page in path.pages %}
    <tr>
        <td>{{ page.id }}</td>
        <td><a href="{{ url_for('pages.read_page', id=page.id) }}">{{ page.page }}</a></td>
        <td><a href="{{ url_for('paths.remove_page_from_path', id=path.id, path_page_id=page.path_page_id)}}">remove</a></td>
    </tr>
    {% endfor %}
</table>
</div>

<form method="post" action="{{ url_for('paths.read_path', id=path.id) }}" class="card">
    <div class="header table">
        <div class="tr">
            <h2 class="title td">Add Page</h2>
        </div>
    </div>
    <div class="body">
    <fieldset>
        <ul>
        {{ render_hidden_field(form.path_id) }}
        {{ render_hidden_field(form.page_id) }}
        {{ render_field(form.page_selector, placeholder=form.page_selector.description, readonly="readonly", **{'ark-selector':'page', 'ark-target':'page_id'}) }}
        </ul>
    </fieldset>
    </div>
    <div class="footer">
        <input class="button" type="submit" value="Add">
    </div>
</form>


{% endblock %}