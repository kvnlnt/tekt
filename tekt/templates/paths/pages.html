{% from "macros/forms.html" import render_field, render_hidden_field %} 
{% extends 'template.html' %}
{% block body %}


<h1>
    <a black href="{{ url_for('.list_paths') }}">Paths</a>
</h1>
<h2>
    <a black href="{{ url_for('paths.read_path', id=path.id) }}">{{path.property.property}}{{path.path}}</a>
</h2>

<div class="card">
    <header>
        <h2 class="title">Page Schedule</h2>
        <div class="actions">
            <a href="#add_page" class="button">Add</a>
        </div>
    </header>
    <div class="content">
        <table class="data">
            <tr>
                <th>#</th>
                <th>page</th>
                <th>actions</th>
            </tr>
            {% for page in path.pages %}
            <tr>
                <td>{{ page.id }}</td>
                <td><a black href="{{ url_for('pages.read_page', id=page.id) }}">{{ page.page }}</a>
                </td>
                <td><a black href="{{ url_for('paths.remove_page', id=path.id, path_page_id=page.path_page_id)}}">remove</a>
                </td>
            </tr>
            {% endfor %}
        </table>
    </div>
</div>

<form id="add_page" method="post" action="{{ url_for('paths.pages', id=path.id) }}">
    <legend>Add Page</legend>
        <fieldset>
            <ul class="list">
                {{ render_hidden_field(form.path_id) }}
                {{ render_hidden_field(form.page_id) }} 
                {{ 
                    render_field(form.page_selector, 
                    placeholder="Click to Search", 
                    readonly="readonly", 
                    show_description=False,
                    **{'tekt-selector':'page'}) 
                }}
            </ul>
        </fieldset>
    <footer>
        <input class="button" type="submit" value="Add Page">
    </footer>
</form>



{% endblock %}
