{% from "macros/forms.html" import render_field, render_hidden_field %} 
{% extends 'template.html' %}
{% block body %}


<h1><a href="{{ url_for('.list_paths') }}">Paths</a></h1>
<h2><a href="{{ url_for('paths.read_path', id=path.id) }}">{{path.property.property}}{{path.path}}</a></h2>

<div tekt-part="card">
<div tekt-pattern="table" class="header">
    <div class="tr">
        <h2 class="title td">Pages</h2>
    </div>
</div>
<table tekt-pattern="table" class="data">
    <tr>
        <th>#</th>
        <th>page</th>
        <th>actions</th>
    </tr>
    {% for page in path.pages %}
    <tr>
        <td>{{ page.id }}</td>
        <td><a href="{{ url_for('pages.read_page', id=page.id) }}">{{ page.page }}</a></td>
        <td><a href="{{ url_for('.remove_page_from_path', id=path.id, path_page_id=page.path_page_id )}}">remove</a></td>
    
    </tr>
    {% endfor %}
</table>
</div>

<form tekt-pattern="form" method="post" action="{{ url_for('.manage_pages', id=path.id) }}" tekt-part="card">
    <div tekt-pattern="table" class="header">
        <div class="tr">
            <h2 class="title td">Add Page</h2>
        </div>
    </div>
<div class="body">
<fieldset>
    <ul tekt-pattern="list">
    {{ render_hidden_field(form.path_id) }}
    {{ render_hidden_field(form.page_id) }}
    {{ render_field(form.page_selector, placeholder=form.page_selector.description, readonly="readonly", **{'tekt-selector':'page', 'tekt-target':'page_id'}) }}
    </ul>
</fieldset>
</div>
<div class="footer">
    <input tekt-pattern="button" type="submit" value="Add">
</div>
</form>



{% endblock %}
